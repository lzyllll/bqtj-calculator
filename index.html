<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>爆枪突击 - 战力计算器 (独立版)</title>
    
    <!-- CSS样式文件 -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ====================================================== -->
    <!--            信息公告栏 (新添加)                         -->
    <!-- ====================================================== -->
    <div class="info-banner">
        <div class="info-banner-content">
            <p class="banner-highlight">
                <a href="https://bqtj.huijiwiki.com" target="_blank">前往《爆枪突击》中文Wiki获取更多攻略 »</a>
            </p>
            <p class="banner-note">
                <strong>特别说明：</strong> 本计算器结果仅供参考。项目作者：奈何，所有数据与公式力求精准，但请以游戏内实际情况为准。
                <a href="https://github.com/zzl-Jiang/bqtj-calculator" target="_blank">[GitHub项目地址]</a>
            </p>
        </div>
    </div>

    <!-- 计算器的主容器 -->
    <div id="power-calculator-app">
        <h1>爆枪突击 - 战力计算器</h1>
        <!-- ====================================================== -->
        <!-- 标签页导航 -->
        <!-- ====================================================== -->
        <div id="calculator-tabs" class="tab-nav">
            <button class="tab-btn" data-tab="single-weapon">单武器战力</button>
            <button class="tab-btn active" data-tab="total-power">人物总战力</button>
            <div class="tab-indicator"></div>
        </div>

        <!-- ====================================================== -->
        <!-- 标签页内容容器 -->
        <!-- ====================================================== -->
        <div class="tab-content">

            <!-- 单武器战力 面板 -->
            <div id="tab-pane-single-weapon" class="tab-pane active">
                <!-- ====================================================== -->
                <!-- 基础参数与快速参数选择 -->
                <!-- ====================================================== -->
                <fieldset class="calculator-section">
                    <legend class="calculator-legend">基础参数与武器选择</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="arms_name">武器名称 (arms_name):</label>
                            <select id="arms_name"></select>
                        </div>
                        <div class="form-group">
                            <label for="arms_lv">武器等级 (arms_lv):</label>
                            <input type="number" id="arms_lv" value="99" min="1" max="99">
                        </div>
                        <div class="form-group">
                            <label for="arms_type">武器类型 (arms_type):</label>
                            <input type="text" id="arms_type" readonly>
                        </div>
                        <div class="form-group">
                            <label for="arms_color">武器颜色 (arms_color):</label>
                            <input type="text" id="arms_color" readonly>
                        </div>
                        <div class="form-group">
                            <label for="dps0">基础战力 (dps0):</label>
                            <input type="text" id="dps0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="hurt_ratio0">基础伤害 (hurt_ratio0):</label>
                            <input type="text" id="hurt_ratio0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="attack_gap0">基础攻击间隔 (attack_gap0):</label>
                            <input type="text" id="attack_gap0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="attack_speed0">基础射速 (attack_speed0):</label>
                            <input type="text" id="attack_speed0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="capacity0">基础弹容 (capacity0):</label>
                            <input type="text" id="capacity0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="reload_gap0">基础装弹时间 (reload_gap0):</label>
                            <input type="text" id="reload_gap0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="shake_angle0">基础抖动角 (shake_angle0):</label>
                            <input type="text" id="shake_angle0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="shoot_angle0">基础散射角 (shoot_angle0):</label>
                            <input type="text" id="shoot_angle0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="shoot_range0">基础射程 (shoot_range0):</label>
                            <input type="text" id="shoot_range0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="bullet_num">子弹数量 (bullet_num):</label>
                            <input type="text" id="bullet_num" readonly>
                        </div>
                        <div class="form-group">
                            <label for="precision0">基础精准度 (precision0):</label>
                            <input type="text" id="precision0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="evo_lv">进阶等级 (evo_lv):</label>
                            <input type="number" id="evo_lv" value="15" min="0">
                        </div>
                    </div>
                    <input type="hidden" id="dps_mul" value="1">
                    <input type="hidden" id="get_dps_mul" value="1">
                </fieldset>

                <!-- 战力加成乘区 -->
                <fieldset class="calculator-section">
                    <legend>战力加成乘区</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="pet_dps">尸宠战力加成 (pet_dps):</label>
                            <input type="number" id="pet_dps" value="620250">
                        </div>
                        <div class="form-group">
                            <label for="parts_dps_mul">特零战力加成 (parts_dps_mul):</label>
                            <input type="number" id="parts_dps_mul" value="0.6" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="ea0_dps">数值普战加成 (ea0_dps):</label>
                            <input type="number" id="ea0_dps" value="48800">
                        </div>
                        <div class="form-group">
                            <label for="ea_dps0">武器类型数值普战 (ea_dps0):</label>
                            <input type="text" id="ea_dps0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="ea0_dps_mul">百分比普战加成 (ea0_dps_mul):</label>
                            <input type="number" id="ea0_dps_mul" value="7.19" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="ea_dps_mul0">武器类型百分比普战 (ea_dps_mul0):</label>
                            <input type="text" id="ea_dps_mul0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="vip_dps_mul">VIP加成 (vip_dps_mul):</label>
                            <input type="number" id="vip_dps_mul" value="0.7" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="whole_dps_mul">全体战力加成 (whole_dps_mul):</label>
                            <input type="number" id="whole_dps_mul" value="0.1505" step="0.0001">
                        </div>
                        <div class="form-group">
                            <label for="more_dps_mul">队友战力加成 (more_dps_mul):</label>
                            <input type="number" id="more_dps_mul" value="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="parts_dps_lv">伤害零件等级 (parts_dps_lv):</label>
                            <input type="number" id="parts_dps_lv" value="93" min="1">
                        </div>
                        <div class="form-group">
                            <label for="parts_dps">伤害零件战力 (parts_dps):</label>
                            <input type="text" id="parts_dps" readonly>
                        </div>
                        <div class="form-group">
                            <label for="dps1">计算后战力 (dps1):</label>
                            <input type="text" id="dps1" readonly>
                        </div>
                        <div class="form-group">
                            <label for="hurt_add1">dps1转伤害 (hurt_add1):</label>
                            <input type="text" id="hurt_add1" readonly>
                        </div>
                    </div>
                </fieldset>
                
                <!-- 伤害加成乘区 -->
                <fieldset class="calculator-section">
                    <legend>伤害加成乘区</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="strengthen_lv">强化等级 (strengthen_lv):</label>
                            <input type="number" id="strengthen_lv" value="28" min="0">
                        </div>
                        <div class="form-group">
                            <label for="strengthen_hurt_mul">强化伤害加成 (strengthen_hurt_mul):</label>
                            <input type="text" id="strengthen_hurt_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="ea0_hurt_mul">百分比普伤加成 (ea0_hurt_mul):</label>
                            <input type="number" id="ea0_hurt_mul" value="1.94" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="ea_hurt_mul0">武器类型百分比普伤 (ea_hurt_mul0):</label>
                            <input type="text" id="ea_hurt_mul0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="ea0_hurt">数值普伤加成 (ea0_hurt):</label>
                            <input type="number" id="ea0_hurt" value="25118">
                        </div>
                        <div class="form-group">
                            <label for="ea_hurt0">武器类型数值普伤 (ea_hurt0):</label>
                            <input type="text" id="ea_hurt0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="get_hurt_add">武器伤害转换系数 (get_hurt_add):</label>
                            <input type="text" id="get_hurt_add" readonly>
                        </div>
                        <div class="form-group">
                            <label for="hurt1">计算后伤害 (hurt1):</label>
                            <input type="text" id="hurt1" readonly>
                        </div>
                    </div>
                </fieldset>

                <!-- 神级加成乘区 -->
                <fieldset class="calculator-section">
                    <legend>神级加成乘区</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="dps_all">神战加成 (dps_all):</label>
                            <input type="number" id="dps_all" value="5.43" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="hurt_all">神伤加成 (hurt_all):</label>
                            <input type="number" id="hurt_all" value="2.01" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="zodiac_hurt_add">生肖伤害加成 (zodiac_hurt_add):</label>
                            <input type="number" id="zodiac_hurt_add" value="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="evo_hurt_mul">进阶伤害加成 (evo_hurt_mul):</label>
                            <input type="text" id="evo_hurt_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="red_hurt_mul">红武增幅器加成 (red_hurt_mul):</label>
                            <input type="number" id="red_hurt_mul" value="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="hurt_ratio">最终面板伤害 (hurt_ratio):</label>
                            <input type="text" id="hurt_ratio" readonly>
                        </div>
                    </div>
                </fieldset>

                <!-- 弹容加成乘区 -->
                <fieldset class="calculator-section">
                    <legend>弹容加成乘区</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="parts_capacity_lv">弹容零件等级 (parts_capacity_lv):</label>
                            <input type="number" id="parts_capacity_lv" value="93" min="1">
                        </div>
                        <div class="form-group">
                            <label for="parts_capacity_mul">零件百分比弹容加成 (parts_capacity_mul):</label>
                            <input type="text" id="parts_capacity_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="ea0_capacity_mul">百分比弹容加成 (ea0_capacity_mul):</label>
                            <input type="number" id="ea0_capacity_mul" value="0.87" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="ea_capacity_mul0">武器类型百分比弹容 (ea_capacity_mul0):</label>
                            <input type="text" id="ea_capacity_mul0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="ea0_capacity">数值弹容加成 (ea0_capacity):</label>
                            <input type="number" id="ea0_capacity" value="48">
                        </div>
                        <div class="form-group">
                            <label for="ea_capacity0">武器类型数值弹容 (ea_capacity0):</label>
                            <input type="text" id="ea_capacity0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="get_capacity_mul">武器弹容转换系数 (get_capacity_mul):</label>
                            <input type="text" id="get_capacity_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="capacity_real">弹容实际值 (capacity_real):</label>
                            <input type="text" id="capacity_real" readonly>
                        </div>
                        <div class="form-group">
                            <label for="capacity">最终面板弹容 (capacity):</label>
                            <input type="text" id="capacity" readonly>
                        </div>
                    </div>
                </fieldset>

                <!-- 射速加成乘区 -->
                <fieldset class="calculator-section">
                    <legend>射速加成乘区</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="parts_attack_gap_lv">射速零件等级 (parts_attack_gap_lv):</label>
                            <input type="number" id="parts_attack_gap_lv" value="93" min="1">
                        </div>
                        <div class="form-group">
                            <label for="parts_attack_gap_mul">零件射速加成 (parts_attack_gap_mul):</label>
                            <input type="text" id="parts_attack_gap_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="ea0_attack_gap">射速加成 (ea0_attack_gap):</label>
                            <input type="number" id="ea0_attack_gap" value="0.06" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="get_attack_gap_add">武器射速转换系数 (get_attack_gap_add):</label>
                            <input type="text" id="get_attack_gap_add" readonly>
                        </div>
                        <div class="form-group">
                            <label for="attack_gap">实际攻击间隔 (attack_gap):</label>
                            <input type="text" id="attack_gap" readonly>
                        </div>
                        <div class="form-group">
                            <label for="attack_speed">最终面板射速 (attack_speed):</label>
                            <input type="text" id="attack_speed" readonly>
                        </div>
                    </div>
                </fieldset>

                <!-- 装弹时间加成乘区 -->
                <fieldset class="calculator-section">
                    <legend>装弹时间加成乘区</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="parts_reload_lv">装弹零件等级 (parts_reload_lv):</label>
                            <input type="number" id="parts_reload_lv" value="93" min="1">
                        </div>
                        <div class="form-group">
                            <label for="parts_reload_mul">零件装弹加成 (parts_reload_mul):</label>
                            <input type="text" id="parts_reload_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="ea0_reload">装弹时间加成 (ea0_reload):</label>
                            <input type="number" id="ea0_reload" value="2.3" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="ea_reload0">武器类型装弹加成 (ea_reload0):</label>
                            <input type="text" id="ea_reload0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="get_reload_mul">武器装弹转换系数 (get_reload_mul):</label>
                            <input type="text" id="get_reload_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="reload_gap">最终面板装弹 (reload_gap):</label>
                            <input type="text" id="reload_gap" readonly>
                        </div>
                    </div>
                </fieldset>

                <!-- 精准度与射程加成乘区 -->
                <fieldset class="calculator-section">
                    <legend>精准度与射程加成乘区</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="parts_precision_lv">精准零件等级 (parts_precision_lv):</label>
                            <input type="number" id="parts_precision_lv" value="93" min="1">
                        </div>
                        <div class="form-group">
                            <label for="parts_shoot_range_lv">射程零件等级 (parts_shoot_range_lv):</label>
                            <input type="number" id="parts_shoot_range_lv" value="93" min="1">
                        </div>
                        <div class="form-group">
                            <label for="parts_shake_angle">零件抖动角加成 (parts_shake_angle):</label>
                            <input type="text" id="parts_shake_angle" readonly>
                        </div>
                        <div class="form-group">
                            <label for="parts_shoot_angle">零件散射角加成 (parts_shoot_angle):</label>
                            <input type="text" id="parts_shoot_angle" readonly>
                        </div>
                        <div class="form-group">
                            <label for="parts_shoot_range">零件射程加成 (parts_shoot_range):</label>
                            <input type="text" id="parts_shoot_range" readonly>
                        </div>
                        <div class="form-group">
                            <label for="get_angle_add_mul">武器角度转换系数 (get_angle_add_mul):</label>
                            <input type="text" id="get_angle_add_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="precision_real">实际精准度 (precision_real):</label>
                            <input type="text" id="precision_real" readonly>
                        </div>
                        <div class="form-group">
                            <label for="precision">最终面板精准度 (precision):</label>
                            <input type="text" id="precision" readonly>
                        </div>
                        <div class="form-group">
                            <label for="shoot_range">最终面板射程 (shoot_range):</label>
                            <input type="text" id="shoot_range" readonly>
                        </div>
                    </div>
                </fieldset>
                
                <!-- 战力显示加成乘区 -->
                <fieldset class="calculator-section">
                    <legend>战力显示加成乘区</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="element">元素属性值 (element):</label>
                            <input type="number" id="element" value="55">
                        </div>
                        <div class="form-group">
                            <label for="ele_add_dps">元素伤害加成 (ele_add_dps):</label>
                            <input type="text" id="ele_add_dps" readonly>
                        </div>
                        <div class="form-group">
                            <label for="base_special_num">特殊属性数量 (base_special_num):</label>
                            <input type="text" id="base_special_num" readonly>
                        </div>
                        <div class="form-group">
                            <label for="skill_num">普通技能数量 (skill_num):</label>
                            <input type="text" id="skill_num" readonly>
                        </div>
                        <div class="form-group">
                            <label for="god_skill_num">神级技能数量 (god_skill_num):</label>
                            <input type="text" id="god_skill_num" readonly>
                        </div>
                        <div class="form-group">
                            <label for="skill_special_mul">技能-特殊属性加成 (skill_special_mul):</label>
                            <input type="text" id="skill_special_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="ui_dps_mul">武器UI加成 (ui_dps_mul):</label>
                            <input type="text" id="ui_dps_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="type_ui_dps_mul">武器类型UI加成 (type_ui_dps_mul):</label>
                            <input type="text" id="type_ui_dps_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="show_dps_mul">调表器加成 (show_dps_mul):</label>
                            <input type="text" id="show_dps_mul" readonly>
                        </div>
                        <div class="form-group">
                            <label for="final_dps">最终面板战力 (final_dps):</label>
                            <input type="text" id="final_dps" readonly>
                        </div>
                    </div>
                </fieldset>

                <div id="result-area" class="calculator-section">
                    <div id="final-result-display">最终结果将在这里显示</div>
                    <div class="button-group">
                        <button id="btn-calculate-all" class="mw-ui-button mw-ui-progressive">一键计算所有</button>
                        <button id="btn-save-data" class="mw-ui-button">记录当前数据</button>
                        <button id="btn-clear-data" class="mw-ui-button mw-ui-destructive">清除已存数据</button>
                    </div>
                </div>
            </div>

            <!-- 人物总战力 面板 -->
            <div id="tab-pane-total-power" class="tab-pane">
                <!-- 使用说明 -->
                <div class="info-box">
                    <p><b>使用说明：</b><br>
                    1. 人物总战力计算所需的各项加成（如尸宠、特零、VIP、零件等）均来自于【单武器战力】标签页中的设置。<br>
                    2. 请先在【单武器战力】页配置好您的通用属性。<br>
                    3. 然后在本页选择武器格数和各槽位武器，并输入三暴倍率。<br>
                    4. 点击“一键计算人物总战力”即可得出结果。
                    </p>
                </div>
                <!-- 快捷参数调整 面板 -->
                <fieldset class="calculator-section">
                    <legend class="calculator-legend">快捷参数调整</legend>
                    <div class="info-box">
                        <p><b>说明：</b>在此处修改常用参数后，点击下方“应用”按钮，可自动同步到所有详细的设置中。</p>
                    </div>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="quick_vip_lv">VIP等级:</label>
                            <input type="number" id="quick_vip_lv" value="10">
                        </div>
                        <div class="form-group">
                            <label for="quick_president_lv">总统等级:</label>
                            <input type="number" id="quick_president_lv" value="10">
                        </div>
                        <div class="form-group">
                            <label for="quick_whole_dps">全体战力加成(%):</label>
                            <input type="number" id="quick_whole_dps" value="15.05" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="quick_shoot_speed">射速加成(%):</label>
                            <input type="number" id="quick_shoot_speed" value="6" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="quick_percent_dps_mul">百分比普战总加成:</label>
                            <input type="number" id="quick_percent_dps_mul" value="7.19" step="0.01" readonly>
                        </div>
                        <div class="form-group">
                            <label for="quick_god_dps_mul">神战总加成:</label>
                            <input type="number" id="quick_god_dps_mul" value="5.43" step="0.01" readonly>
                        </div>
                        <div class="form-group">
                            <label for="quick_percent_hurt_mul">百分比普伤总加成:</label>
                            <input type="number" id="quick_percent_hurt_mul" value="7.24" step="0.01" readonly>
                        </div>
                        <div class="form-group">
                            <label for="quick_god_hurt_mul">神伤总加成:</label>
                            <input type="number" id="quick_god_hurt_mul" value="2.01" step="0.01" readonly>
                        </div>
                    </div>
                    <div class="button-group">
                        <button id="btn-apply-quick-settings" class="mw-ui-button">应用快捷参数</button>
                    </div>
                </fieldset>
                <fieldset id="total-power-calculator" class="calculator-section">
                    <legend class="calculator-legend">人物总战力计算</legend>
                    <div class="section-body">
                        <div class="form-group">
                            <label for="weapon_num">武器格数 (weapon_num):</label>
                            <select id="weapon_num">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6" selected>6</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="triple_crit">三暴倍率 (triple_crit):</label>
                            <input type="number" id="triple_crit" value="0.14" step="0.01">
                        </div>
        
                        <div id="weapon-slots-container" class="section-body full-width">
                            <!-- 武器槽位将由JS动态生成 -->
                        </div>
                        
                        <div class="form-group full-width result-highlight">
                            <label for="total_dps">人物总战力 (total_dps):</label>
                            <input type="text" id="total_dps" readonly>
                        </div>
        
                        <div class="button-group full-width">
                            <button id="btn-calculate-total-power" class="mw-ui-button mw-ui-progressive">一键计算人物总战力</button>
                        </div>
                    </div>
                </fieldset>
            </div>

        </div>
    </div>
    
    <!-- 在body底部引入jQuery和脚本 -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="script.js"></script>
</body>
</html>